{% extends "blog/bbase.html" %}
{% load staticfiles %}
{% block main %}

<iframe src="list/" name="listframe" id="listframe" frameborder="0" marginwidth="0" marginheight="0" scrolling="auto" onload="" ></iframe>

{% endblock %}

{% block sidebar %} 
<div id="treeViewDiv">
</div>

<script>
$(function (){
	
	
	
	$("#treeViewDiv").jstree({ 'core' : {
		'data' : [
		{
		'text' : 'Facilities',
		'a_attr' : {'href' : "{% url 'blog:list' %}"},
		'state' : {
			'opened' : true
			},
		'children' : [
			{% for post in posts %}
			{
			'text' : "{{post.title}}",
			'a_attr' : {'href' : "{% url 'blog:posts' post.slug%}"},
			'children' : [],
			'state' : {
			'opened' : false,
			'selected' : false
			}
			},
			{% endfor %}
		]
		}
		]
		}
	})
	.bind('select_node.jstree', function(e, data) {
		var href = data.node.a_attr.href;
		if(href !== undefined){
			window.top.frames['listframe'].location = href;
		}
		});
})
/*$(function () {
	$('#jstree_demo_div').jstree();
	$('#jstree_demo_div').on("changed.jstree", function (e, data) {
		console.log(data.selected);
		});
	$('button').on('click', function() {
		$('#jstree').jstree(true).select_node('child_node_1');
		$('#jstree').jstree('select_node', 'child_node_1');
		$.jstree.reference('#jstree').select_node('child_node_1');
		});
})*/
</script>
{% endblock %}